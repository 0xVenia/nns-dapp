type BlockHeight = nat64;
type Doms = nat64;
type SubAccount = vec nat8;

type GetAccountResponse =
    variant {
        Ok: {
            sub_accounts: vec NamedSubAccount;
        };
        AccountNotFound;
    };

type Timestamp =
    record {
        secs: nat64;
        nanos: nat32;
    };

type GetTransactionsRequest =
    record {
        "principal": principal;
        offset: nat32;
        page_size: nat8;
    };

type GetTransactionsResponse =
    record {
        transactions: vec Transaction;
        total: nat32;
    };

type Send =
    record {
        to: principal;
        amount: Doms;
        fee: Doms;
    };

type Receive =
    record {
        from: principal;
        amount: Doms;
        fee: Doms;
    };

type Transfer =
    variant {
        Burn: record { amount: Doms };
        Mint: record { amount: Doms };
        Send: Send;
        Receive: Receive;
    };

type Transaction =
    record {
        block_height: BlockHeight;
        timestamp: Timestamp;
        transfer: Transfer;
    };

type NamedSubAccount =
    record {
        name: text;
        sub_account: SubAccount;
        "principal": principal;
    };

type CreateSubAccountResponse =
    variant {
        Ok: NamedSubAccount;
        AccountNotFound;
        SubAccountLimitExceeded;
    };

service : {
    get_account: () -> (GetAccountResponse) query;
    add_account: () -> ();
    get_transactions: (GetTransactionsRequest) -> (GetTransactionsResponse) query;
    create_sub_account: (text) -> (CreateSubAccountResponse);
}
